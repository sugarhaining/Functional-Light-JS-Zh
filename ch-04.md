到现在，我希望你已经对我们使用函数来进行函数式编程的意义有所了解。

一个函数式程序员看待他们程序中的每个函数就像是看到乐高积木那样。他们一眼就认出了这个蓝色的2X2的砖块，并且知道它式如何工作的，以及它们能够做什么。随着他们开始搭建起更大更复杂的模型时，对于他们所需要的每个组件，他们都已经有了从备件中挑选出所需部件的本能。

但是，有时候你会把蓝色的2X2的砖块和灰色的4X4的砖块按照正确的方式放在一起，而且你随之想到：“这是个很有用的组件，我应该会经常用到它。”

所以，现在你构造了一个新的“组件”，这是由另外两个组件组合而来的，你可以在任何你需要的时候通过刚才的方式来构造这个新的组件。在你需要的时候使用这种复合型的蓝灰砖块明显要更有效率，而不是每次都考虑重新组装它们。

函数有着各种各样的形状和尺寸，我们可以定义它们的某种组合，以形成一个新的符合函数，这在程序的各个部分中都很方便。这个一起使用多个函数的过程就被称作*组合 composition*。

# 输出到输入
我们已经看过不少有关组合的例子了。比如，在第三章我们讨论`unary(..)`的时候，我们提到了这个表达式`unary(adder(3))`。想想看这里发生了什么吧。

要组合两个函数，将第一个函数调用的输出作为第二个函数调用的输入。在`unary(adder(3))`中，`adder(3)`调用输出了一个值（一个函数）；然后这个值就被当作实参，直接传递到了`unary(..)`中，它也将返回一个值（另一个函数）。

我们后退一步，将这个数据在概念上的流动状态可视化，大概式这样的：
```
functionValue <-- unary <-- adder <-- 3
```

`3`被输入到了`adder(..)`中，`adder(..)`的输出又被输入到了`unary(..)`中；最后，`unary(..)`的输出是`functionValue`。这就是`unary(..)`和`adder(..)`的组合。

想象一下这样的数据流吧，就像是糖果厂的传送带一样，每个操作都是生产糖果过程中像是冷却、切割、包裹这样的部分。在本章中我们将会用糖果厂的比喻来解释组合到底是什么。

[组合函数的数据流动](https://github.com/getify/Functional-Light-JS/raw/master/fig2.png)

我们先来审视一下动作中的组合。在你的程序中可能会有这样两个工具函数：
```JavaScript
function words(str) {
	return String( str )
		.toLowerCase()
		.split( /\s|\b/ )
		.filter( function alpha(v){
			return /^[\w]+$/.test( v );
		} );
}

function unique(list) {
	var uniqList = [];

	for (let i = 0; i < list.length; i++) {
		// value not yet in the new list?
		if (uniqList.indexOf( list[i] ) === -1 ) {
			uniqList.push( list[i] );
		}
	}

	return uniqList;
}
```

使用这两个工具函数来分析文本字符串：
```JavaScript
var text = "To compose two functions together, pass the \
output of the first function call as the input of the \
second function call.";

var wordsFound = words( text );
var wordsUsed = unique( wordsFound );

wordsUsed;
// ["to","compose","two","functions","together","pass",
// "the","output","of","first","function","call","as",
// "input","second"]
```

我们将`words(..)`的数组输出明明为`wordsFound`。`unique(..)`的输入也是一个数组，所以我们能够将`wordsFound`传输进去。

回到糖果厂的装配线来：第一台机器将会“输入”融化的巧克力，然后它“输出”的是冷却成型的巧克力。装配线上的下一台机器的“输入”则是成型的巧克力块，而它的“输出”则是被切分好的巧克力糖。接下来，线上的另一台机器将取出传送带上的小巧克力糖，然后输出包装好的糖果，并准备打包和运输。

[糖果厂 一](https://github.com/getify/Functional-Light-JS/raw/master/fig3.png)

糖果厂因为这个过程变得非常成功，但是与所有的企业一样，管理层一直在寻找新的增长方式。


翻译：4014
总共：38227
进度：10%
